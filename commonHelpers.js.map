{"version":3,"file":"commonHelpers.js","sources":["../src/js/helpers.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst MESSAGES = {\n    info: 'Please enter a value in the search field!',\n    warning:\n        'Sorry, there are no images matching your search query. Please try again!',\n    error:\n        'Sorry, there are no connection to the server. Please try again later! ',\n    exception:\n        'Exception: We have some issue with connection. Please try again later! ',\n};\n\nconst MESSAGES_BG_COLORS = {\n    blue: '#abd4f8',\n    orange: '#f28111',\n    red: '#e97782',\n};\n\nfunction showInfoMessage(message, color) {\n    iziToast.info({\n        position: 'topRight',\n        backgroundColor: `${color}`,\n        message: `${message}`,\n    });\n}\n\nexport { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage };","import { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage } from './helpers';\n\nconst options = {\n    method: 'GET',\n};\nconst API_KEY = '42598065-1779ad5a953180c3fe77c2809';\nconst API_URL = 'https://pixabay.com/api/?';\n\nexport async function getGalleryData(queryValue) {\n    try {\n        const searchParams = new URLSearchParams({\n            key: API_KEY,\n            q: queryValue,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n        });\n\n        const response = await fetch(API_URL + searchParams, options).then();\n        if (!response.ok) {\n            showInfoMessage(MESSAGES.error, MESSAGES_BG_COLORS.orange);\n            return;\n        }\n        return await response.json();\n    } catch (err) {\n        showInfoMessage(\n            `${MESSAGES.exception} ERROR:  ${err}`,\n            MESSAGES_BG_COLORS.orange\n        );\n    }\n}","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function renderGallery(data, tagToInsert) {\n    tagToInsert.innerHTML = markup(data);\n\n    lightbox.refresh();\n}\n\nfunction markup(data) {\n    return data.hits\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => `\n\t\t\t\t<li class=\"gallery-item hvr-grow\">\n\t\t\t\t\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t\t\t\t\t<figure class=\"gallery-figure \">\n\t\t\t\t\t\t\t<img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n\t\t\t\t\t\t\t<figcaption class=\"gallery-figcaption\">\n\t\t\t\t\t\t\t\t<ul class=\"img-content-wrapper\">\n\t\t\t\t\t\t\t\t\t<li>Likes<span>${likes}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Views<span>${views}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Comments<span>${comments}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Downloads<span>${downloads}</span></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t`\n        )\n        .join('');\n}","import iziToast from 'izitoast';\n\nimport { MESSAGES, MESSAGES_BG_COLORS, showInfoMessage } from './js/helpers';\n\nimport { getGalleryData } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst div = document.createElement('div');\n\nform.addEventListener('submit', onSubmitForm);\n\nasync function onSubmitForm(event) {\n    event.preventDefault();\n\n    iziToast.destroy();\n    gallery.innerHTML = '';\n    addLoader();\n\n    const formData = new FormData(event.target);\n    const { search } = Object.fromEntries(formData.entries());\n\n    if (!search.trim()) {\n        showInfoMessage(MESSAGES.info, MESSAGES_BG_COLORS.blue);\n        gallery.innerHTML = '';\n        return;\n    }\n\n    try {\n        const galleryData = await getGalleryData(search.trim());\n        if (validateGalleryData(galleryData)) {\n            renderGallery(galleryData, gallery);\n        }\n    } catch (error) {\n        showInfoMessage(MESSAGES.exception + error, MESSAGES_BG_COLORS.orange);\n    }\n\n    event.target.reset();\n}\n\nfunction addLoader() {\n    div.classList.add('loader');\n    gallery.append(div);\n}\n\nfunction validateGalleryData(galleryData) {\n    if (!galleryData) {\n        gallery.innerHTML = '';\n        return false;\n    } else if (galleryData && galleryData.totalHits === 0) {\n        showInfoMessage(MESSAGES.warning, MESSAGES_BG_COLORS.red);\n        gallery.innerHTML = '';\n        return false;\n    } else {\n        return true;\n    }\n}\n"],"names":["MESSAGES","MESSAGES_BG_COLORS","showInfoMessage","message","color","iziToast","options","API_KEY","API_URL","getGalleryData","queryValue","searchParams","response","err","lightbox","SimpleLightbox","renderGallery","data","tagToInsert","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","div","onSubmitForm","event","addLoader","formData","search","galleryData","validateGalleryData","error"],"mappings":"6vBAOA,MAAMA,EAAW,CACb,KAAM,4CACN,QACI,2EACJ,MACI,yEACJ,UACI,yEACR,EAEMC,EAAqB,CACvB,KAAM,UACN,OAAQ,UACR,IAAK,SACT,EAEA,SAASC,EAAgBC,EAASC,EAAO,CACrCC,EAAS,KAAK,CACV,SAAU,WACV,gBAAiB,GAAGD,CAAK,GACzB,QAAS,GAAGD,CAAO,EAC3B,CAAK,CACL,CC3BA,MAAMG,EAAU,CACZ,OAAQ,KACZ,EACMC,EAAU,qCACVC,EAAU,4BAET,eAAeC,EAAeC,EAAY,CAC7C,GAAI,CACA,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACxB,CAAS,EAEKE,EAAW,MAAM,MAAMJ,EAAUG,EAAcL,CAAO,EAAE,OAC9D,GAAI,CAACM,EAAS,GAAI,CACdV,EAAgBF,EAAS,MAAOC,EAAmB,MAAM,EACzD,MACH,CACD,OAAO,MAAMW,EAAS,MACzB,OAAQC,EAAK,CACVX,EACI,GAAGF,EAAS,SAAS,YAAYa,CAAG,GACpCZ,EAAmB,MAC/B,CACK,CACL,CCzBA,MAAMa,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAcC,EAAMC,EAAa,CAC7CA,EAAY,UAAYC,EAAOF,CAAI,EAEnCH,EAAS,QAAO,CACpB,CAEA,SAASK,EAAOF,EAAM,CAClB,OAAOA,EAAK,KACP,IACG,CAAC,CACG,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CAChB,IAAkB;AAAA;AAAA,qCAEmBL,CAAa;AAAA;AAAA,yCAETD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,0BAGzCC,CAAK;AAAA,0BACLC,CAAK;AAAA,6BACFC,CAAQ;AAAA,8BACPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAO9B,EACA,KAAK,EAAE,CAChB,CCvCA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAM,SAAS,cAAc,KAAK,EAExCF,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,eAAeA,EAAaC,EAAO,CAC/BA,EAAM,eAAc,EAEpB1B,EAAS,QAAO,EAChBuB,EAAQ,UAAY,GACpBI,IAEA,MAAMC,EAAW,IAAI,SAASF,EAAM,MAAM,EACpC,CAAE,OAAAG,CAAM,EAAK,OAAO,YAAYD,EAAS,QAAO,CAAE,EAExD,GAAI,CAACC,EAAO,OAAQ,CAChBhC,EAAgBF,EAAS,KAAMC,EAAmB,IAAI,EACtD2B,EAAQ,UAAY,GACpB,MACH,CAED,GAAI,CACA,MAAMO,EAAc,MAAM1B,EAAeyB,EAAO,KAAM,CAAA,EAClDE,EAAoBD,CAAW,GAC/BnB,EAAcmB,EAAaP,CAAO,CAEzC,OAAQS,EAAO,CACZnC,EAAgBF,EAAS,UAAYqC,EAAOpC,EAAmB,MAAM,CACxE,CAED8B,EAAM,OAAO,OACjB,CAEA,SAASC,GAAY,CACjBH,EAAI,UAAU,IAAI,QAAQ,EAC1BD,EAAQ,OAAOC,CAAG,CACtB,CAEA,SAASO,EAAoBD,EAAa,CACtC,OAAKA,EAGMA,GAAeA,EAAY,YAAc,GAChDjC,EAAgBF,EAAS,QAASC,EAAmB,GAAG,EACxD2B,EAAQ,UAAY,GACb,IAEA,IAPPA,EAAQ,UAAY,GACb,GAQf"}